<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1129px" preserveAspectRatio="none" style="width:1154px;height:1129px;" version="1.1" viewBox="0 0 1154 1129" width="1154px" zoomAndPan="magnify"><defs/><g><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="127" x="1011" y="9.29">Diagramme de déploiement</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="123" x="1015" y="21.29">Architecture d'infrastucture</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="154" x="984" y="33.29">Projet Mes Informations En Ligne</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="34" x="1107" y="45.29">(partiel)</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="80" x="530.5" y="64.7218">archi-infra</text><!--MD5=[aa2f05b2676d7d34ffa7e771fb7634f3]
cluster client--><rect fill="#FFFFFF" height="207" style="stroke:#000000;stroke-width:1.5;" width="268" x="7" y="76.5998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="44" x="119" y="93.4638">Client</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="97" x="92.5" y="108.9479">[Desktop/mobile]</text><!--MD5=[633fb7825fae851bee0f05932b747d69]
cluster nav1--><rect fill="#FFFFFF" height="123" style="stroke:#000000;stroke-width:1.5;" width="220" x="31" y="136.5998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="121" x="80.5" y="153.4638">Navigateur Web</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="134" x="74" y="168.9479">[Chrome/Firefox/Safari]</text><!--MD5=[dcf9d23a479b6f5be5f2cd2f538bf578]
cluster dc--><rect fill="#FFFFFF" height="960" style="stroke:#000000;stroke-width:1.5;" width="849" x="299" y="76.5998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="83" x="682" y="93.4638">Datacenter</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="38" x="704.5" y="108.9479">[Paris]</text><!--MD5=[055f8d928468d5ee47912ab3392f306c]
cluster rp1--><rect fill="#FFFFFF" height="123" style="stroke:#000000;stroke-width:1.5;" width="207" x="908" y="333.5998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="112" x="955.5" y="350.4638">Reverse Proxy</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="191" x="916" y="365.9479">[x2 Debian Buster &lt;&lt;actif/actif&gt;&gt;]</text><!--MD5=[8ff4396602d070838c9bd134df71b6f1]
cluster serveur_ihm--><rect fill="#FFFFFF" height="275" style="stroke:#000000;stroke-width:1.5;" width="518" x="338" y="506.5998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="135" x="529.5" y="523.4638">Serveur IHM MIEL</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="107" x="543.5" y="538.9479">[x2 Debian Buster]</text><!--MD5=[f217dde53d0f6df02d6d8a2648a2c4d6]
cluster sw1--><rect fill="#FFFFFF" height="191" style="stroke:#000000;stroke-width:1.5;" width="216" x="616" y="566.5998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="98" x="675" y="583.4638">Serveur Web</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="41" x="703.5" y="598.9479">[Nginx]</text><!--MD5=[370fc723dcc71ff2416a72075e7ea309]
cluster tomcat_batchs1--><rect fill="#FFFFFF" height="174" style="stroke:#000000;stroke-width:1.5;" width="230" x="362" y="575.0998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="95" x="429.5" y="591.9638">Serveur JEE</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="68" x="443" y="607.4479">[Tomcat 10]</text><!--MD5=[7d3503eef35f2b251bd4df9c23ea00e1]
cluster serveur_api--><rect fill="#FFFFFF" height="207" style="stroke:#000000;stroke-width:1.5;" width="222" x="880" y="540.5998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="91" x="945.5" y="557.4638">Serveur API</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="61" x="960.5" y="572.9479">[x3, RHEL]</text><!--MD5=[fc957f8bf8adafd4952fb52d9ba77f73]
cluster wilfly1--><rect fill="#FFFFFF" height="123" style="stroke:#000000;stroke-width:1.5;" width="174" x="904" y="600.5998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="95" x="943.5" y="617.4638">Serveur JEE</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="46" x="968" y="632.9479">[Wildfly]</text><!--MD5=[d00fc2baadf01bd66ad11f10bf19f061]
cluster bdd1--><rect fill="#FFFFFF" height="148" style="stroke:#000000;stroke-width:1.5;" width="465" x="459" y="856.5998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="100" x="641.5" y="873.4638">Serveur BDD</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="41" x="671" y="888.9479">[RHEL]</text><!--MD5=[60e42aeba2869df57588502bd4075f0d]
cluster serveur_sup1--><rect fill="#FFFFFF" height="123" style="stroke:#000000;stroke-width:1.5;" width="204" x="716" y="136.5998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="156" x="740" y="153.4638">Serveur Supervision</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="763" y="168.9479">[x1 Debian Stretch]</text><!--MD5=[4227f5d58943708b70f3d215ef85b45a]
cluster ech1--><rect fill="#FFFFFF" height="123" style="stroke:#000000;stroke-width:1.5;" width="168" x="956" y="869.0998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="132" x="974" y="885.9638">Serveur Echange</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="118" x="981" y="901.4479">[x1 Windows Server]</text><!--MD5=[33573e971ff506c0f246109ca3fd77bd]
entity spa--><rect fill="#438DD5" height="55.4002" style="stroke:#3C7FC0;stroke-width:1.5;" width="187" x="47.5" y="188.5998"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="167" x="57.5" y="213.4638">Application SPA MIEL</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50" x="116" y="231">[React.js]</text><!--MD5=[2d034b0875f5e28a2e66ba2265252e77]
entity r2--><rect fill="#FEFECE" height="53.6001" style="stroke:#000000;stroke-width:1.5;" width="146" x="473" y="189.0998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="58" x="517" y="213.9638">Firewall</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="126" x="483" y="229.4479">[Cisco Firepower 4100]</text><!--MD5=[4fc6c3b5a1fba55664248d096da24559]
entity lb1--><rect fill="#FEFECE" height="53.6001" style="stroke:#000000;stroke-width:1.5;" width="127" x="584.5" y="386.0998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="107" x="594.5" y="410.9638">LB Debian lb1</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="42" x="627" y="426.4479">[«actif»]</text><!--MD5=[775c34017581a5522a6f6586a118dcb1]
entity lb2--><rect fill="#FEFECE" height="53.6001" style="stroke:#000000;stroke-width:1.5;" width="127" x="315.5" y="386.0998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="107" x="325.5" y="410.9638">LB Debian lb2</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="52" x="353" y="426.4479">[«passif»]</text><!--MD5=[13e83dc1471c2b56ed23aea5d3447ba5]
entity baie1--><path d="M315.5,926.5998 C315.5,916.5998 363,916.5998 363,916.5998 C363,916.5998 410.5,916.5998 410.5,926.5998 L410.5,971 C410.5,981 363,981 363,981 C363,981 315.5,981 315.5,971 L315.5,926.5998 " fill="#438DD5" style="stroke:#3C7FC0;stroke-width:1.5;"/><path d="M315.5,926.5998 C315.5,936.5998 363,936.5998 363,936.5998 C363,936.5998 410.5,936.5998 410.5,926.5998 " fill="none" style="stroke:#3C7FC0;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="75" x="325.5" y="955.4638">SAN EMC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="40" x="343" y="973">[baie 1]</text><!--MD5=[cf1939a6d037fdc7e48ba6fad249093b]
entity tous_serveurs--><rect fill="#FEFECE" height="53.6001" style="stroke:#000000;stroke-width:1.5;" width="143" x="746.5" y="386.0998"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="123" x="756.5" y="410.9638">&lt;tous serveurs&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="71" x="782.5" y="426.4479">[Supervision]</text><!--MD5=[a9d05f7f70b84ddb3c2779d8f2bc364a]
entity ha1--><rect fill="#438DD5" height="55.4002" style="stroke:#3C7FC0;stroke-width:1.5;" width="132" x="925" y="385.5998"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="112" x="935" y="410.4638">Reverse Proxy</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53" x="964.5" y="428">[HaProxy]</text><!--MD5=[70a1b81d520fd1adeafa2831833ecec2]
entity ihms1--><rect fill="#438DD5" height="122.5999" style="stroke:#3C7FC0;stroke-width:1.5;" width="183" x="632.5" y="618.5998"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="163" x="642.5" y="643.4638">Application Web SPA</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50" x="699" y="661">[React.js]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="726" y="677.0059"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="656" y="693.8058">Expose les resources</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="695.5" y="710.6058">statiques</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="661.5" y="727.4057">(.js, .html, images...)</text><!--MD5=[1efad2a5399e22ca699c44f97cb39c39]
entity batch1--><rect fill="#438DD5" height="105.7999" style="stroke:#3C7FC0;stroke-width:1.5;" width="197" x="378.5" y="627.0998"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="177" x="388.5" y="651.9638">batch-traiter-demandes</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="32" x="461" y="669.5">[Java]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="479" y="685.5059"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="414" y="702.3058">Traite les demandes</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="420.5" y="719.1058">scheduling: * * * * *</text><!--MD5=[292e5a3114c0f5c68837ca2833dd9f72]
entity api1--><rect fill="#438DD5" height="55.4002" style="stroke:#3C7FC0;stroke-width:1.5;" width="142" x="920" y="652.5998"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="122" x="930" y="677.4638">API service-miel</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="32" x="975" y="695">[Java]</text><!--MD5=[358e89297f090aa598af710b97232d4f]
entity pg1--><path d="M786.5,926.5998 C786.5,916.5998 843,916.5998 843,916.5998 C843,916.5998 899.5,916.5998 899.5,926.5998 L899.5,971 C899.5,981 843,981 843,981 C843,981 786.5,981 786.5,971 L786.5,926.5998 " fill="#438DD5" style="stroke:#3C7FC0;stroke-width:1.5;"/><path d="M786.5,926.5998 C786.5,936.5998 843,936.5998 843,936.5998 C843,936.5998 899.5,936.5998 899.5,926.5998 " fill="none" style="stroke:#3C7FC0;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="93" x="796.5" y="955.4638">PostgreSQL</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="89" x="798.5" y="973">[PostgreSQL 12]</text><!--MD5=[b715e21e4b36457c82624b259f0e13ea]
entity mq1--><path d="M599,926.5998 C599,916.5998 675,916.5998 675,916.5998 C675,916.5998 751,916.5998 751,926.5998 L751,971 C751,981 675,981 675,981 C675,981 599,981 599,971 L599,926.5998 " fill="#438DD5" style="stroke:#3C7FC0;stroke-width:1.5;"/><path d="M599,926.5998 C599,936.5998 675,936.5998 675,936.5998 C675,936.5998 751,936.5998 751,926.5998 " fill="none" style="stroke:#3C7FC0;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="132" x="609" y="955.4638">File de messages</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="61" x="644.5" y="973">[RabbitMQ]</text><!--MD5=[75764623d0425db6e25f21048e113307]
entity mail1--><rect fill="#438DD5" height="55.4002" style="stroke:#3C7FC0;stroke-width:1.5;" width="62" x="502" y="921.0998"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="35" x="515.5" y="945.9638">MTA</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="42" x="512" y="963.5">[Postfix]</text><!--MD5=[b9a7eeff770a3fcd3efe9c0d6a637854]
entity sup1--><rect fill="#438DD5" height="55.4002" style="stroke:#3C7FC0;stroke-width:1.5;" width="172" x="732" y="188.5998"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="152" x="742" y="213.4638">Outil de supervision</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="57" x="789.5" y="231">[Centreon]</text><!--MD5=[018d2d8d50435b42cec2b4140d57d7e0]
entity gw1--><rect fill="#438DD5" height="55.4002" style="stroke:#3C7FC0;stroke-width:1.5;" width="135" x="972.5" y="921.0998"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="96" x="992" y="945.9638">API Gateway</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="115" x="982.5" y="963.5">[Axway API Gateway]</text><!--MD5=[41e2cdb76a5e93c488fe1edb692e6813]
link spa to r2--><path d="M234.93,216.0998 C305.11,216.0998 399.98,216.0998 466.43,216.0998 " fill="none" id="spa-to-r2" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="471.26,216.0998,462.26,212.0998,466.26,216.0998,462.26,220.0998,471.26,216.0998" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="292.25" y="209.1058">HTTPS sur Internet</text><!--MD5=[b37f33b0adf6ddf8df37898ea1b4d81f]
link r2 to lb1--><path d="M559.76,243.3998 C578.36,278.9698 611.51,342.3398 631.46,380.4698 " fill="none" id="r2-to-lb1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="633.6,384.5698,632.9519,374.7423,631.273,380.1443,625.871,378.4655,633.6,384.5698" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="598" y="313.6058">HTTPS</text><!--MD5=[25e79779583fe1397abae1cbf5041f3a]
link lb2 to lb1--><path d="M442.75,413.0998 C483.39,413.0998 536.07,413.0998 577.89,413.0998 " fill="none" id="lb2-to-lb1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="582.73,413.0998,573.73,409.0998,577.73,413.0998,573.73,417.0998,582.73,413.0998" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="461" y="406.1058">Heartbeat VRRP</text><!--MD5=[f6908ca845453f8da6b8af004b80a660]
link lb1 to ha1--><path d="M663.89,385.8798 C680.67,360.2098 709.77,323.4998 746.5,308.5998 C778.83,295.4798 871.17,295.4798 903.5,308.5998 C935.91,321.7498 960.07,354.5598 974.69,379.9298 " fill="none" id="lb1-to-ha1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="977.11,384.2298,976.2114,374.422,974.6709,379.8651,969.2278,378.3246,977.11,384.2298" style="stroke:#666666;stroke-width:2.0;"/><!--MD5=[b919f988c4bce1e880e64d49f95b4af9]
link ha1 to ihms1--><path d="M963.07,441.0098 C945.95,457.5498 923.63,479.2198 904,498.5998 C865.56,536.5298 822.87,579.3098 788.72,613.6998 " fill="none" id="ha1-to-ihms1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="785.24,617.2098,794.418,613.6371,788.7612,613.66,788.7383,608.0032,785.24,617.2098" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="931" y="486.6058">HTTP</text><!--MD5=[cc2c3c92d98e429caea85a93febf697b]
link api1 to mq1--><path d="M960.09,707.9598 C929.59,732.9998 880.61,769.4198 832,789.5998 C814.45,796.8898 806.18,787.6298 790,797.5998 C745.72,824.8998 712.18,875.8998 693.06,910.7898 " fill="none" id="api1-to-mq1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="690.84,914.9098,698.6311,908.885,693.2122,910.5084,691.5888,905.0895,690.84,914.9098" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="823" y="811.6058">produit</text><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="795" y="828.4057">JMS / RabbitMQ</text><!--MD5=[09082bc8e5792c6c41b711aecd7ba620]
link batch1 to mq1--><path d="M534.69,733.3798 C554.13,752.5398 575.15,775.0698 592,797.5998 C618.85,833.4998 642.84,879.0798 658.04,910.5298 " fill="none" id="batch1-to-mq1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="660.12,914.8598,659.8366,905.015,657.9587,910.3511,652.6226,908.4732,660.12,914.8598" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="635" y="811.6058">consomme</text><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="620" y="828.4057">JMS / RabbitMQ</text><!--MD5=[7b1baacdd1b512b0b5526a0821eb1c32]
link api1 to pg1--><path d="M976.27,707.6298 C949.69,755.4898 893.67,856.3498 863.42,910.8298 " fill="none" id="api1-to-pg1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="861.13,914.9598,868.9974,909.035,863.5582,910.589,862.0042,905.1498,861.13,914.9598" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="926" y="820.1058">JDBC / PG</text><!--MD5=[64c0ccfecd872af91c7d9f9c4e978a76]
link batch1 to mail1--><path d="M441.65,733.5798 C424.87,765.5698 413.14,805.3998 437,832.5998 C455.03,853.1498 476.96,823.1398 498,840.5998 C519.68,858.5898 528.04,890.2298 531.21,914.4598 " fill="none" id="batch1-to-mail1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="531.77,919.2598,534.7161,909.8619,531.199,914.2925,526.7684,910.7755,531.77,919.2598" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="438" y="820.1058">SMTP / envoi des mails</text><!--MD5=[8fcf5976a98e3bca57aeefbb1aee650b]
link api1 to gw1--><path d="M995.88,707.6298 C1004.88,756.5898 1024.08,861.0298 1033.92,914.5198 " fill="none" id="api1-to-gw1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="1034.8,919.2998,1037.1133,909.7265,1033.8993,914.3816,1029.2441,911.1676,1034.8,919.2998" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1019" y="820.1058">SOAP/HTTPS</text><!--MD5=[f34dc1f3b1c6ff82a7e06f995e1d7775]
link ha1 to api1--><path d="M991,440.9698 C991,489.7798 991,592.8498 991,645.9398 " fill="none" id="ha1-to-api1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="991,650.6498,995,641.6498,991,645.6498,987,641.6498,991,650.6498" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="992" y="486.6058">REST /HTTP</text><!--MD5=[550caef32d717bac0ebe69f734e3a92e]
link sup1 to tous_serveurs--><path d="M818,243.8098 C818,279.1098 818,341.2698 818,379.3598 " fill="none" id="sup1-to-tous_serveurs" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="818,384.1998,822,375.1998,818,379.1998,814,375.1998,818,384.1998" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="819" y="313.6058">SNMP</text><!--MD5=[4c876d55682c34b2c4c4855a39e4821d]
reverse link baie1 to bdd1--><path d="M417.14,948.5998 C428.49,948.5998 439.7025,948.5998 448.6113,948.5998 C450.8384,948.5998 452.9216,948.5998 454.827,948.5998 C455.7797,948.5998 456.6879,948.5998 457.5475,948.5998 C457.9772,948.5998 458.3948,948.5998 458.7997,948.5998 C458.8503,948.5998 458.9008,948.5998 458.951,948.5998 " fill="none" id="baie1-backto-bdd1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="412.25,948.5998,421.25,952.5998,417.25,948.5998,421.25,944.5998,412.25,948.5998" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="20" x="428.57" y="940.5349">FC</text><rect fill="#DDDDDD" height="64.3998" rx="5" ry="5" style="stroke:#000000;stroke-width:1.0;" width="231" x="901" y="1049.5998"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="0" x="987" y="1069.6058"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34" x="991" y="1069.6058">Type</text><rect fill="#FFFFFF" height="16.7999" style="stroke:none;stroke-width:1.0;" width="80" x="907" y="1073.3997"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="931" y="1086.4057"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="991" y="1086.4057">deployment node</text><rect fill="#438DD5" height="16.7999" style="stroke:none;stroke-width:1.0;" width="80" x="907" y="1090.1997"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="915" y="1103.2056"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="991" y="1103.2056">deployment instance</text><line style="stroke:#000000;stroke-width:1.0;" x1="907" x2="1126" y1="1056.5998" y2="1056.5998"/><line style="stroke:#000000;stroke-width:1.0;" x1="907" x2="1126" y1="1073.3997" y2="1073.3997"/><line style="stroke:#000000;stroke-width:1.0;" x1="907" x2="1126" y1="1090.1997" y2="1090.1997"/><line style="stroke:#000000;stroke-width:1.0;" x1="907" x2="1126" y1="1106.9996" y2="1106.9996"/><line style="stroke:#000000;stroke-width:1.0;" x1="907" x2="907" y1="1056.5998" y2="1106.9996"/><line style="stroke:#000000;stroke-width:1.0;" x1="987" x2="987" y1="1056.5998" y2="1106.9996"/><line style="stroke:#000000;stroke-width:1.0;" x1="1126" x2="1126" y1="1056.5998" y2="1106.9996"/><!--MD5=[bdd53d7d8782125ac3e2d8236973e22d]
@startuml
!include C4/C4_Deployment.puml
title archi-infra
header Diagramme de déploiement \nArchitecture d'infrastucture \n Projet Mes Informations En Ligne \n (partiel)
LAYOUT_WITH_LEGEND()

Node("client","Client","Desktop/mobile"){
  Node("nav1","Navigateur Web","Chrome/Firefox/Safari"){
    Container("spa","Application SPA MIEL","React.js")
  }
}

Node("dc","Datacenter","Paris"){
    Node("r2","Firewall","Cisco Firepower 4100")
    Node("lb1","LB Debian lb1","<<actif>>")
    Node("lb2","LB Debian lb2","<<passif>>")

    Node("rp1","Reverse Proxy","x2 Debian Buster <<actif/actif>>"){
      Container("ha1","Reverse Proxy","HaProxy")
    }

    Node("serveur_ihm", "Serveur IHM MIEL","x2 Debian Buster") { 
      Node("sw1","Serveur Web","Nginx"){
        Container("ihms1","Application Web SPA","React.js","Expose les resources statiques\n (.js, .html, images...)")
      }
      Node("tomcat_batchs1","Serveur JEE","Tomcat 10"){
        Container("batch1","batch-traiter-demandes","Java","Traite les demandes\n scheduling: * * * * *")
      }
    }

    Node("serveur_api","Serveur API","x3, RHEL") { 
      Node("wilfly1","Serveur JEE","Wildfly") {
        Container("api1","API service-miel","Java")        
      }
    }

    Node("bdd1", "Serveur BDD","RHEL")  { 
      ContainerDb("pg1","PostgreSQL","PostgreSQL 12")
      ContainerDb("mq1", "File de messages", "RabbitMQ")
      Container("mail1","MTA","Postfix")
    }

    Node("serveur_sup1", "Serveur Supervision","x1 Debian Stretch") {
      Container("sup1","Outil de supervision","Centreon")      
    }

    Node("ech1","Serveur Echange","x1 Windows Server") {
      Container("gw1","API Gateway","Axway API Gateway")    
    }

    ContainerDb("baie1","SAN EMC","baie 1")
    Node("tous_serveurs","<tous serveurs>","Supervision")
}

spa -> r2 : HTTPS sur Internet
r2 - -> lb1 : HTTPS
lb2 -> lb1 : Heartbeat VRRP
lb1 -> ha1
ha1 - -> ihms1 : HTTP
api1 - -> mq1 : produit\n JMS / RabbitMQ
batch1 - ->  mq1 : consomme\n JMS / RabbitMQ
api1 - ->  pg1 : JDBC / PG
batch1 - ->  mail1 : SMTP / envoi des mails
api1 - ->  gw1 : SOAP/HTTPS
ha1 - -> api1 : REST /HTTP
sup1 - -> tous_serveurs : SNMP

Rel_Left("bdd1","baie1","FC")

@enduml

@startuml





skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam rectangle {
    StereotypeFontSize 12
    shadowing false
}

skinparam database {
    StereotypeFontSize 12
    shadowing false
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 14
    Thickness 2
}

skinparam rectangle<<zone>> {
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
}






















skinparam rectangle<<person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #08427B
    BorderColor #073B6F
}

skinparam rectangle<<external_person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #686868
    BorderColor #8A8A8A
}

skinparam rectangle<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam rectangle<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}

skinparam database<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam database<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}
















skinparam rectangle<<unité déployable>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}

skinparam database<<unité déployable>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}












skinparam rectangle<<component>> {
    StereotypeFontColor #FFFFFF
    FontColor #000000
    BackgroundColor #85BBF0
    BorderColor #78A8D8
}

skinparam database<<component>> {
    StereotypeFontColor #FFFFFF
    FontColor #000000
    BackgroundColor #85BBF0
    BorderColor #78A8D8
}











skinparam rectangle<<instance>> {
  roundCorner 8
  Shadowing false
  StereotypeFontColor #FFFFFF
  FontColor #FFFFFF
  BackgroundColor #438DD5
  BorderColor #3C7FC0
}

skinparam database<<instance>> {
  roundCorner 8
  Shadowing false
  StereotypeFontColor #FFFFFF
  FontColor #FFFFFF
  BackgroundColor #438DD5
  BorderColor #3C7FC0
}

skinparam rectangle<<node>> {
  roundCorner 8
  Shadowing false
  StereotypeFontSize 0
  FontColor #444444
  BackgroundColor #FFFFFF
  BorderColor #444444
}





title archi-infra
header Diagramme de déploiement \nArchitecture d'infrastucture \n Projet Mes Informations En Ligne \n (partiel)
hide stereotype
legend right
|=                    |= Type               |
|<#FFFFFF>      | deployment node     |
|<#438DD5>  | deployment instance |
endlegend

rectangle "==Client\n<size:12>[Desktop/mobile]</size>" as client{
  rectangle "==Navigateur Web\n<size:12>[Chrome/Firefox/Safari]</size>" as nav1{
    rectangle "==Application SPA MIEL\n//<size:12>[React.js]</size>//" <<unité déployable>> as spa
  }
}

rectangle "==Datacenter\n<size:12>[Paris]</size>" as dc{
    rectangle "==Firewall\n<size:12>[Cisco Firepower 4100]</size>" as r2
    rectangle "==LB Debian lb1\n<size:12>[<<actif>>]</size>" as lb1
    rectangle "==LB Debian lb2\n<size:12>[<<passif>>]</size>" as lb2

    rectangle "==Reverse Proxy\n<size:12>[x2 Debian Buster <<actif/actif>>]</size>" as rp1{
      rectangle "==Reverse Proxy\n//<size:12>[HaProxy]</size>//" <<unité déployable>> as ha1
    }

    rectangle "==Serveur IHM MIEL\n<size:12>[x2 Debian Buster]</size>" as serveur_ihm { 
      rectangle "==Serveur Web\n<size:12>[Nginx]</size>" as sw1{
        rectangle "==Application Web SPA\n//<size:12>[React.js]</size>//\n\n Expose les resources statiques\n (.js, .html, images...)" <<unité déployable>> as ihms1
      }
      rectangle "==Serveur JEE\n<size:12>[Tomcat 10]</size>" as tomcat_batchs1{
        rectangle "==batch-traiter-demandes\n//<size:12>[Java]</size>//\n\n Traite les demandes\n scheduling: * * * * *" <<unité déployable>> as batch1
      }
    }

    rectangle "==Serveur API\n<size:12>[x3, RHEL]</size>" as serveur_api { 
      rectangle "==Serveur JEE\n<size:12>[Wildfly]</size>" as wilfly1 {
        rectangle "==API service-miel\n//<size:12>[Java]</size>//" <<unité déployable>> as api1        
      }
    }

    rectangle "==Serveur BDD\n<size:12>[RHEL]</size>" as bdd1  { 
      database "==PostgreSQL\n//<size:12>[PostgreSQL 12]</size>//" <<unité déployable>> as pg1
      database "==File de messages\n//<size:12>[RabbitMQ]</size>//" <<unité déployable>> as mq1
      rectangle "==MTA\n//<size:12>[Postfix]</size>//" <<unité déployable>> as mail1
    }

    rectangle "==Serveur Supervision\n<size:12>[x1 Debian Stretch]</size>" as serveur_sup1 {
      rectangle "==Outil de supervision\n//<size:12>[Centreon]</size>//" <<unité déployable>> as sup1      
    }

    rectangle "==Serveur Echange\n<size:12>[x1 Windows Server]</size>" as ech1 {
      rectangle "==API Gateway\n//<size:12>[Axway API Gateway]</size>//" <<unité déployable>> as gw1    
    }

    database "==SAN EMC\n//<size:12>[baie 1]</size>//" <<unité déployable>> as baie1
    rectangle "==<tous serveurs>\n<size:12>[Supervision]</size>" as tous_serveurs
}

spa -> r2 : HTTPS sur Internet
r2 - -> lb1 : HTTPS
lb2 -> lb1 : Heartbeat VRRP
lb1 -> ha1
ha1 - -> ihms1 : HTTP
api1 - -> mq1 : produit\n JMS / RabbitMQ
batch1 - ->  mq1 : consomme\n JMS / RabbitMQ
api1 - ->  pg1 : JDBC / PG
batch1 - ->  mail1 : SMTP / envoi des mails
api1 - ->  gw1 : SOAP/HTTPS
ha1 - -> api1 : REST /HTTP
sup1 - -> tous_serveurs : SNMP

bdd1 -LEFT-> baie1 : "===FC"

@enduml

PlantUML version 1.2021.00(Sun Jan 10 11:25:05 CET 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>